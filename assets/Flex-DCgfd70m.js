import{r as n,h as Oe,q as Re,m as Ee,k as Y,a as I,l as Ae,Q as l,j as e,y as Te,d as _,z as ze,C as Me}from"./index-BIQNIXWJ.js";import{P as Le,R as K,S as $e,H as X}from"./html5-qrcode-scanner-Ux8GTHmM.js";import{C as Z}from"./ConfirmationModal-MPaOjvMO.js";import{F as ee}from"./file-text-ltIgArWG.js";import{c as S}from"./createLucideIcon-BiC_M7d7.js";import{S as Fe}from"./search-CUfjDCWZ.js";import{X as j}from"./x-BWAmgk43.js";import{P as te}from"./pen-square-CfmUglff.js";import{T as P}from"./trash-2-PACqYT-W.js";import{S as se}from"./scan-barcode-DjTy0pGZ.js";import{S as Pe}from"./save-DNxXilbW.js";import{C as qe}from"./check-circle-D51gh7hl.js";import"./alert-triangle-DYeiMHlu.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=S("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=S("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=S("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=S("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),st=()=>{const[ne,v]=n.useState([]),[oe,q]=n.useState(!0),[x,k]=n.useState(""),[N,V]=n.useState(""),[le,D]=n.useState(!1),[ie,O]=n.useState(!1),[ce,R]=n.useState(!1),[de,E]=n.useState(!1),[d,A]=n.useState(null),[i,m]=n.useState({alias:"",generalObservation:"",items:[],displayId:""}),[w,C]=n.useState(""),[H,T]=n.useState(!0),[z,me]=n.useState(null),[u,f]=n.useState(!1),[h,xe]=n.useState([]),[B,ue]=n.useState(null);n.useRef(null);const c=n.useRef(null),M=n.useRef(!1),[pe,fe]=n.useState(null),{userData:L,currentUser:g}=Oe();n.useEffect(()=>{if(!g)return;const t=Re(Y(I,"reports"),Ee("createdAt","desc"));return Ae(t).then(s=>{const r=s.docs.map(a=>({firebaseId:a.id,...a.data()}));v(r),q(!1)}).catch(s=>{console.error("Error loading reports (getDocs):",s),s.code==="permission-denied"?l.error("Erro de Permissão (403): Verifique regras do Firebase."):s.code==="unavailable"?l.error("Erro de Conexão: Verifique se o banco está acessível (Firewall/Extensões)."):l.error("Erro ao carregar (getDocs): "+s.message),q(!1)}),()=>{c.current&&(c.current.stop().catch(s=>console.error("Error stopping scanner:",s)),c.current=null)}},[g]);const G=n.useRef(i);n.useEffect(()=>{G.current=i},[i]);const he=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let s="";for(let r=0;r<5;r++)s+=t.charAt(Math.floor(Math.random()*t.length));return s},$=()=>{const t=new Date,s=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),p=String(t.getMinutes()).padStart(2,"0");return`Flex_${s}${r}${a}${o}${p}`},be=t=>{try{if(t.trim().startsWith("{")&&t.trim().endsWith("}")){const s=JSON.parse(t);if(s.id)return s.id.toString()}}catch(s){console.log("Não é um JSON válido da etiqueta ML:",s)}return t},ge=t=>{const s=t.trim();return H?be(s):s},ye=()=>{m({alias:$(),generalObservation:"",items:[],displayId:he()}),A(null),D(!0),T((iderisSettings==null?void 0:iderisSettings.enabled)??!0)},je=t=>{m({alias:t.alias,generalObservation:t.generalObservation||"",items:t.items||[],displayId:t.id}),A(t.firebaseId),D(!0),T((iderisSettings==null?void 0:iderisSettings.enabled)??!0)},y=()=>{D(!1),b(),C("")},F=(t,s="")=>{const r=ge(t);if(!r){l.error("ID inválido.");return}if(G.current.items.some(o=>o.sendId===r)){l.warning("Este ID já está na lista.");return}const a={id:Date.now()+Math.random().toString(36).substr(2,9),sendId:r,observation:s};m(o=>({...o,items:[...o.items,a]})),C("")},ve=t=>{m(s=>({...s,items:s.items.filter((r,a)=>a!==t)}))},Ne=(t,s)=>{const r=[...i.items];r[t].observation=s,m(a=>({...a,items:r}))},J=async()=>{if(u&&b(),f(!0),await new Promise(s=>setTimeout(s,400)),!document.getElementById("reader-flex")){console.error("Reader element not found after activation"),f(!1);return}try{const s=await X.getCameras();xe(s);const r=new X("reader-flex");c.current=r;const a={fps:20,qrbox:{width:300,height:300},aspectRatio:1},o=B||{facingMode:"environment"};await r.start(o,a,p=>{M.current||(M.current=!0,we("success"),F(p),l.success("Código lido!"),setTimeout(()=>{M.current=!1},1500))},p=>{})}catch(s){console.error("Erro ao iniciar scanner:",s),l.error("Não foi possível acessar a câmera."),f(!1)}},we=(t="success")=>{try{const s=window.AudioContext||window.webkitAudioContext;if(!s)return;const r=new s,a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),t==="success"&&(a.type="sine",a.frequency.setValueAtTime(800,r.currentTime),a.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.1),o.gain.setValueAtTime(.1,r.currentTime),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),a.start(),a.stop(r.currentTime+.1))}catch(s){console.warn("Audio Context Error:",s)}},Ce=async()=>{if(!c.current||h.length<2)return;const s=(h.findIndex(a=>a.id===B)+1)%h.length,r=h[s].id;try{b(),ue(r),setTimeout(()=>J(),100),l.info(`Câmera alterada para: ${h[s].label||"Próxima"}`)}catch(a){console.error("Erro ao trocar câmera:",a),l.error("Erro ao trocar de câmera.")}},b=()=>{c.current?c.current.stop().then(()=>{c.current=null,f(!1)}).catch(t=>{console.error("Erro ao parar scanner:",t),f(!1)}):f(!1)};n.useEffect(()=>()=>{c.current&&(c.current.stop().catch(t=>console.error(t)),c.current=null)},[]);const Ie=()=>{u?b():J()},Se=async()=>{if(i.items.length===0){l.error("Adicione pelo menos um item.");return}if(!g){l.error("Usuário não autenticado.");return}const t={userId:g.uid,userName:(L==null?void 0:L.nome)||g.email||"Usuário",alias:i.alias||$(),items:i.items.map(s=>({sendId:s.sendId,observation:s.observation||""})),generalObservation:i.generalObservation,updatedAt:new Date().toISOString(),itemCount:i.items.length};try{if(d)await Te(_(I,"reports",d),t),v(s=>s.map(r=>r.firebaseId===d?{...r,...t}:r)),l.success("Relatório atualizado!"),b(),y();else{t.id=i.displayId,t.createdAt=new Date().toISOString();const s=await ze(Y(I,"reports"),t),r={...t,firebaseId:s.id};v(a=>[r,...a]),l.success("Relatório criado!"),fe(r),b(),y(),E(!0)}}catch(s){console.error("Erro ao salvar:",s),s.code==="permission-denied"?l.error("Erro de permissão. Verifique se você está logado."):l.error("Erro ao salvar relatório.")}},ke=async()=>{if(d)try{await Me(_(I,"reports",d)),v(t=>t.filter(s=>s.firebaseId!==d)),l.success("Relatório excluído."),R(!1),y()}catch(t){console.error("Erro ao excluir:",t),l.error("Erro ao excluir relatório.")}},U=t=>{var p;const s=new Date(t.createdAt||t.updatedAt).toLocaleDateString("pt-BR"),r=new Date().toLocaleTimeString("pt-BR");let a="";t.items&&t.items.length>0?a=`
                <table style="width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 12px;">
                    <thead>
                        <tr>
                            <th style="background:#f2f2f2; padding:10px; border:1px solid #ddd; text-align:left; width:5%;">#</th>
                            <th style="background:#f2f2f2; padding:10px; border:1px solid #ddd; text-align:left; width:55%;">ID de Envio</th>
                            <th style="background:#f2f2f2; padding:10px; border:1px solid #ddd; text-align:left; width:40%;">Observação</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${t.items.map((Q,De)=>`
                            <tr>
                                <td style="padding:8px 10px; border:1px solid #ddd;">${De+1}</td>
                                <td style="padding:8px 10px; border:1px solid #ddd;">${Q.sendId||"N/A"}</td>
                                <td style="padding:8px 10px; border:1px solid #ddd;">${Q.observation||"-"}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            `:a='<div style="text-align:center; padding:20px; color:#888;">Nenhum item.</div>';const o=window.open("","_blank","width=800,height=600");o&&(o.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Relatório - ${t.alias}</title>
                    <style>
                        body { font-family: sans-serif; padding: 20px; color: #333; }
                        h1 { font-size: 24px; margin-bottom: 5px; }
                        .info { background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 20px; }
                        .obs { margin-top: 20px; padding: 15px; background: #f8f9fa; border-left: 4px solid #4a6cf7; }
                        @media print { .no-print { display: none; } }
                    </style>
                </head>
                <body>
                    <div style="text-align:center; border-bottom:2px solid #333; padding-bottom:20px; margin-bottom:20px;">
                        <h1>${t.alias}</h1>
                        <p>Sistema de Relatórios Flex</p>
                    </div>
                    <div class="info">
                        <p><strong>ID:</strong> ${t.id}</p>
                        <p><strong>Data:</strong> ${s}</p>
                        <p><strong>Total de Itens:</strong> ${((p=t.items)==null?void 0:p.length)||0}</p>
                    </div>
                    ${a}
                    <div class="obs">
                        <h3>Observação Geral</h3>
                        <p>${t.generalObservation||"Nenhuma."}</p>
                    </div>
                    <div style="margin-top:40px; text-align:center; font-style:italic; border-top:1px solid #ddd; padding-top:20px; font-size:12px;">
                        Impresso em ${s} às ${r}
                    </div>
                    <div class="no-print" style="text-align:center; margin-top:20px;">
                        <button onclick="window.print()" style="padding:10px 20px; background:#4a6cf7; color:white; border:none; cursor:pointer;">Imprimir</button>
                    </div>
                    <script>
                        window.onload = () => setTimeout(() => window.print(), 500);
                    <\/script>
                </body>
                </html>
            `),o.document.close())},W=ne.filter(t=>{const s=x===""||t.id.toLowerCase().includes(x.toLowerCase())||t.alias.toLowerCase().includes(x.toLowerCase())||t.items&&t.items.some(a=>a.sendId.toLowerCase().includes(x.toLowerCase()));let r=!0;return N&&new Date(t.createdAt).toISOString().split("T")[0]!==N&&(r=!1),s&&r});return e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ee,{className:"w-8 h-8 text-blue-600"}),"Relatórios Flex"]}),e.jsxs("button",{onClick:ye,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[e.jsx(ae,{className:"w-5 h-5"}),"Novo Relatório"]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Pesquisar ID, alias ou item...",value:x,onChange:t=>k(t.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),x&&e.jsx("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 whitespace-nowrap",children:"Data:"}),e.jsx("input",{type:"date",value:N,onChange:t=>V(t.target.value),className:"border border-gray-300 rounded text-sm p-1.5 focus:ring-2 focus:ring-blue-500 outline-none bg-white"}),(N||x)&&e.jsx("button",{className:"text-gray-400 hover:text-red-500 p-2 transition-colors",onClick:()=>{k(""),V("")},title:"Limpar filtros",children:e.jsx(j,{size:18})})]})]})}),e.jsxs("div",{className:"flex-reports-container",children:[e.jsxs("div",{className:"flex-reports-header bg-gray-100 border-b-2 border-slate-200 text-gray-600 uppercase text-xs tracking-wider rounded-t-lg",children:[e.jsx("div",{className:"font-semibold py-4 border-r-2 border-white flex items-center",children:"Data"}),e.jsx("div",{className:"font-semibold py-4 border-r-2 border-white flex items-center justify-center",children:"ID"}),e.jsx("div",{className:"font-semibold py-4 border-r-2 border-white flex items-center pl-4",children:"Alias"}),e.jsx("div",{className:"font-semibold py-4 border-r-2 border-white flex items-center justify-center",children:"Itens"}),e.jsx("div",{className:"font-semibold py-4 flex items-center justify-center",children:"Ações"})]}),e.jsx("div",{className:"flex-reports-list",children:oe?e.jsxs("div",{className:"text-center p-8 text-blue-600",children:[e.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-current border-t-transparent rounded-full mb-2"}),e.jsx("p",{children:"Carregando..."})]}):W.length===0?e.jsxs("div",{className:"text-center p-8 text-gray-500",children:[e.jsx(ee,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("h3",{children:"Nenhum relatório encontrado"}),e.jsx("p",{children:"Tente ajustar os filtros ou crie um novo."})]}):W.map(t=>{var s;return e.jsxs("div",{className:"flex-report-item",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"mobile-label",children:"Data:"}),new Date(t.createdAt).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex justify-center items-center w-full",children:[e.jsx("span",{className:"mobile-label",children:"ID:"}),e.jsx("span",{className:"flex-report-id",children:t.id})]}),e.jsxs("div",{className:"font-semibold text-gray-800 truncate w-full pl-4",children:[e.jsx("span",{className:"mobile-label",children:"Alias:"}),t.alias]}),e.jsxs("div",{className:"flex justify-center items-center w-full",children:[e.jsx("span",{className:"mobile-label",children:"Itens:"}),e.jsx("span",{className:"flex-report-items-count",children:((s=t.items)==null?void 0:s.length)||0})]}),e.jsxs("div",{className:"flex-report-actions !justify-center w-full",children:[e.jsx("button",{className:`flex-btn-icon ${t.generalObservation?"flex-btn-info":"bg-gray-200 text-gray-400 cursor-default"}`,onClick:()=>{t.generalObservation&&(me(t),O(!0))},title:"Ver Observação",children:e.jsx(re,{size:16})}),e.jsx("button",{className:"flex-btn-icon flex-btn-warning",onClick:()=>je(t),title:"Editar",children:e.jsx(te,{size:16})}),e.jsx("button",{className:"flex-btn-icon flex-btn-info",onClick:()=>U(t),title:"Imprimir",children:e.jsx(Le,{size:16})}),e.jsx("button",{className:"flex-btn-icon flex-btn-danger",onClick:()=>{A(t.firebaseId),R(!0)},title:"Excluir",children:e.jsx(P,{size:16})})]})]},t.firebaseId)})})]}),le&&e.jsx("div",{className:"flex-modal",children:e.jsxs("div",{className:"flex-modal-content",children:[e.jsxs("div",{className:"flex-modal-header",children:[e.jsxs("h2",{children:[d?e.jsx(te,{size:24}):e.jsx(Ve,{size:24}),d?"Editar Relatório":"Novo Relatório"]}),e.jsx("button",{className:"flex-close-modal",onClick:y,children:e.jsx(j,{size:24})})]}),e.jsxs("div",{className:"flex-modal-body",children:[e.jsx("div",{className:"flex-alias-scanner-row",children:e.jsx("div",{className:"flex-alias-container",children:e.jsxs("div",{className:"flex-form-group",children:[e.jsx("label",{children:"Alias (Opcional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.alias,onChange:t=>m(s=>({...s,alias:t.target.value})),placeholder:"Nomeie seu relatório"}),e.jsx("button",{className:"bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 transition-colors",onClick:()=>m(t=>({...t,alias:$()})),title:"Gerar Alias",children:e.jsx(K,{size:18})})]})]})})}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200 mb-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2 font-semibold text-gray-700 text-sm",children:[e.jsx(se,{size:16,className:"text-blue-600"})," Adicionar ID"]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:w,onChange:t=>C(t.target.value),onKeyDown:t=>t.key==="Enter"&&F(w),placeholder:"Digite ou escaneie o ID...",className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}),w&&e.jsx("button",{onClick:()=>C(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 rounded-lg font-medium shadow-sm transition-colors flex items-center justify-center gap-2",onClick:()=>F(w),children:[e.jsx(ae,{size:18})," Adicionar ID"]}),e.jsx("button",{className:`p-3 rounded-lg border transition-colors ${u?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,onClick:Ie,title:u?"Parar Scanner":"Abrir Câmera",children:u?e.jsx($e,{size:20}):e.jsx(se,{size:20})}),u&&h.length>1&&e.jsx("button",{className:"p-3 rounded-lg border bg-blue-50 border-blue-200 text-blue-600 hover:bg-blue-100 transition-colors",onClick:Ce,title:"Alternar Câmera",children:e.jsx(K,{size:20})})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ml-label",checked:H,onChange:t=>T(t.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ml-label",className:"text-xs text-gray-600 cursor-pointer select-none",children:"Extrair ID de etiqueta ML (JSON)"})]})]}),e.jsxs("div",{className:"mb-4 overflow-hidden rounded-xl bg-black relative",style:{display:u?"block":"none",minHeight:"300px"},children:[e.jsx("div",{id:"reader-flex",className:"w-full h-full"}),e.jsx("p",{className:"text-center text-white py-2 text-sm bg-black font-semibold absolute bottom-0 left-0 w-full opacity-70 border-t border-white/20",children:"Escaneando..."})]}),e.jsxs("div",{className:"flex-items-list mb-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-3 font-semibold text-gray-700",children:[e.jsx(He,{size:18})," Itens do Relatório",e.jsx("span",{className:"ml-auto bg-blue-600 text-white text-sm font-bold px-3 py-1 rounded-full shadow-sm",children:i.items.length})]}),e.jsx("div",{className:"max-h-60 overflow-auto border rounded-lg",children:e.jsxs("table",{className:"flex-items-table mb-0",children:[e.jsx("thead",{className:"bg-gray-100 border-b-2 border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{width:"40%",className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase border-r border-white",children:"ID"}),e.jsx("th",{width:"50%",className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase border-r border-white",children:"Observação"}),e.jsx("th",{width:"10%",className:"px-4 py-3 text-right"})]})}),e.jsx("tbody",{children:i.items.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center p-4 text-gray-500",children:"Nenhum item adicionado."})}):i.items.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono text-sm",children:t.sendId}),e.jsx("td",{children:e.jsx("input",{type:"text",value:t.observation,onChange:r=>Ne(s,r.target.value),className:"w-full text-sm border-gray-200 rounded p-1",placeholder:"Obs..."})}),e.jsx("td",{className:"text-center",children:e.jsx("button",{onClick:()=>ve(s),className:"text-red-500 hover:text-red-700",children:e.jsx(P,{size:16})})})]},s))})]})})]}),e.jsxs("div",{className:"flex-form-group",children:[e.jsx("label",{children:"Observação Geral"}),e.jsx("textarea",{value:i.generalObservation,onChange:t=>m(s=>({...s,generalObservation:t.target.value})),placeholder:"Observações do relatório..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",onClick:y,children:"Cancelar"}),e.jsxs("button",{className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-sm flex items-center gap-2 transition-all disabled:opacity-70",onClick:Se,children:[e.jsx(Pe,{size:18})," Salvar"]})]})]})]})}),ie&&z&&e.jsx("div",{className:"flex-modal",children:e.jsxs("div",{className:"flex-modal-content",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"flex-modal-header",children:[e.jsxs("h2",{children:[e.jsx(re,{size:20})," Observação"]}),e.jsx("button",{className:"flex-close-modal",onClick:()=>O(!1),children:e.jsx(j,{size:24})})]}),e.jsxs("div",{className:"flex-modal-body",children:[e.jsx("h3",{className:"font-bold mb-2",children:z.alias}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-gray-700 whitespace-pre-wrap",children:z.generalObservation}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{className:"flex-btn flex-btn-secondary",onClick:()=>O(!1),children:"Fechar"})})]})]})}),e.jsx(Z,{isOpen:ce,onClose:()=>R(!1),onConfirm:ke,title:"Excluir Relatório?",message:"Esta ação não pode ser desfeita.",confirmText:"Sim, Excluir",variant:"danger",icon:P}),e.jsx(Z,{isOpen:de,onClose:()=>E(!1),onConfirm:()=>{U(pe),E(!1)},title:"Salvo com Sucesso!",message:"Deseja imprimir este relatório agora?",confirmText:"Imprimir",cancelText:"Agora não",variant:"info",icon:qe})]})};export{st as default};
