import{h as T,r as c,d as u,a as x,g as A,f as g,Q as o,j as e}from"./index-BEQVS49R.js";import{L as P,S as I}from"./sweetalert2.esm.all-DymbNtWO.js";import{U as L}from"./user-HdBmW-NK.js";import{B as z}from"./bell-CL7CLcI3.js";import{c as p}from"./createLucideIcon-Bk8-2FPL.js";import{P as D}from"./plus-Dl9dpFtD.js";import{T as $}from"./trash-2-KCeR5k6i.js";import{S as B}from"./save-Bp3T3vqF.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=p("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=p("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=p("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);function W(){var N;const{userData:r}=T(),[l,b]=c.useState("perfil"),[w,k]=c.useState(!0),[C,d]=c.useState(!1),[s,m]=c.useState({ticketTypes:[],marketplaces:[],allowRegistration:!0}),[h,y]=c.useState(""),[i,v]=c.useState("ticketTypes");c.useEffect(()=>{S()},[]);const S=async()=>{d(!0);try{const t=u(x,"sys_settings","general"),a=await A(t);if(a.exists())m(a.data());else{const n={ticketTypes:["Devolução","Reembolso","Fraude","Contatar MarketPlace","Contatar Cliente","Interno","Defeito","Prejuízo","Atraso na entrega","Produto errado","Faltou item","Dúvida técnica","Cancelamento"],marketplaces:["Mercado Livre","Amazon","Interno","Shopee","Magalu"],allowRegistration:!0};await g(t,n),m(n)}}catch(t){console.error("Error fetching settings:",t),o.error("Erro ao carregar configurações.")}finally{d(!1)}},j=async()=>{if(!h.trim())return;const t=[...s[i]||[],h.trim()],a={...s,[i]:t};try{await g(u(x,"sys_settings","general"),a),m(a),y(""),o.success("Item adicionado com sucesso!")}catch(n){console.error("Error adding item:",n),o.error("Erro ao adicionar item.")}},E=async t=>{const a=s[i].filter(f=>f!==t),n={...s,[i]:a};try{await g(u(x,"sys_settings","general"),n),m(n),o.success("Item removido com sucesso!")}catch(f){console.error("Error deleting item:",f),o.error("Erro ao remover item.")}},R=async()=>{if(s.ticketTypes.length===0&&s.marketplaces.length===0){o.error("Erro: Dados de configuração não carregados corretamente. Recarregue a página.");return}d(!0);try{await g(u(x,"sys_settings","general"),s,{merge:!0}),o.success("Configurações salvas com sucesso!")}catch(t){console.error("Error saving settings:",t),o.error("Erro ao salvar configurações.")}finally{d(!1)}},M=async()=>{if((await I.fire({title:"Restaurar Padrões?",text:"Isso irá repopular as listas com os valores originais (Devolução, Marketplaces, etc).",icon:"warning",showCancelButton:!0,confirmButtonText:"Sim, restaurar",cancelButtonText:"Cancelar"})).isConfirmed){const a={ticketTypes:["Devolução","Reembolso","Fraude","Contatar MarketPlace","Contatar Cliente","Interno","Defeito","Prejuízo","Atraso na entrega","Produto errado","Faltou item","Dúvida técnica","Cancelamento"],marketplaces:["Mercado Livre","Amazon","Interno","Shopee","Magalu"],allowRegistration:s.allowRegistration};d(!0);try{await g(u(x,"sys_settings","general"),a,{merge:!0}),m(a),o.success("Padrões restaurados com sucesso!")}catch(n){console.error("Error restoring defaults:",n),o.error("Erro ao restaurar padrões.")}finally{d(!1)}}};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Configurações"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>b("perfil"),className:`px-6 py-4 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${l==="perfil"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(L,{className:"w-4 h-4"})," Perfil"]}),e.jsxs("button",{onClick:()=>b("notificacoes"),className:`px-6 py-4 font-medium text-sm flex items-center gap-2 transition-colors ${l==="notificacoes"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(z,{className:"w-4 h-4"})," Notificações"]}),e.jsxs("button",{onClick:()=>b("seguranca"),className:`px-6 py-4 font-medium text-sm flex items-center gap-2 transition-colors ${l==="seguranca"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(_,{className:"w-4 h-4"})," Segurança"]}),e.jsxs("button",{onClick:()=>b("cadastros"),className:`px-6 py-4 font-medium text-sm flex items-center gap-2 transition-colors ${l==="cadastros"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(G,{className:"w-4 h-4"})," Cadastros Gerais"]})]}),e.jsxs("div",{className:"p-6",children:[l==="perfil"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-2xl",children:(N=r==null?void 0:r.nome)==null?void 0:N.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:r==null?void 0:r.nome}),e.jsx("p",{className:"text-gray-500",children:r==null?void 0:r.email}),e.jsx("p",{className:"text-xs text-blue-600 font-medium mt-1",children:"Administrador"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),e.jsx("input",{type:"text",defaultValue:r==null?void 0:r.nome,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",defaultValue:r==null?void 0:r.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"})]})]})]}),l==="notificacoes"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Notificações por Email"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receba atualizações sobre seus chamados."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:t=>k(t.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),l==="seguranca"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Permitir Novos Cadastros"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Habilita ou desabilita a opção de "Cadastre-se" na tela de login.'})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.allowRegistration,onChange:t=>m(a=>({...a,allowRegistration:t.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-yellow-800 text-sm mb-1",children:"Alterar Senha"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Para alterar sua senha, enviaremos um link de redefinição para seu email cadastrado."}),e.jsx("button",{className:"mt-3 text-sm font-medium text-yellow-900 underline hover:text-yellow-700",children:"Enviar email de redefinição"})]})]}),l==="cadastros"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:C?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(P,{className:"w-8 h-8 text-blue-600 animate-spin"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-2",children:[e.jsx("button",{onClick:()=>v("ticketTypes"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${i==="ticketTypes"?"bg-blue-50 text-blue-700 border border-blue-200":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"Tipos de Chamado"}),e.jsx("button",{onClick:()=>v("marketplaces"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${i==="marketplaces"?"bg-blue-50 text-blue-700 border border-blue-200":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"Marketplaces"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i==="ticketTypes"?"Gerenciar Tipos de Chamado":"Gerenciar Marketplaces"}),e.jsxs("button",{onClick:M,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1 font-medium bg-blue-50 px-2 py-1 rounded",title:"Restaura os valores sugeridos pelo sistema",children:[e.jsx(V,{className:"w-3 h-3"})," Restaurar Padrões"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Novo item...",value:h,onChange:t=>y(t.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",onKeyDown:t=>t.key==="Enter"&&j()}),e.jsx("button",{onClick:j,disabled:!h.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 max-h-[400px] overflow-y-auto divide-y divide-gray-100",children:[(s[i]||[]).map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-white transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:t}),e.jsx("button",{onClick:()=>E(t),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition-colors",title:"Excluir",children:e.jsx($,{className:"w-4 h-4"})})]},a)),(s[i]||[]).length===0&&e.jsx("div",{className:"p-6 text-center text-gray-400 text-sm",children:"Nenhum item cadastrado."})]})]})]})}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 flex justify-end",children:l!=="cadastros"&&e.jsxs("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors",children:[e.jsx(B,{className:"w-5 h-5"})," Salvar Alterações"]})})]})]})]})}export{W as default};
